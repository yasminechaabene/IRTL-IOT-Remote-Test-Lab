{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\src\\\\pages\\\\PatternsPage.js\";\nimport Page from 'components/Page';\nimport logo200Image from 'assets/img/logo/logo_200.png';\nimport carte from 'assets/img/products/raspberry pi.PNG';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport * as moment from 'moment';\nimport { addPattern, getPatterns, deletePattern } from 'components/UserFunctions';\nimport { withRouter, Link } from \"react-router-dom\";\nimport { Button, Card, CardBody, CardHeader, Col, Row, Table, CardText, Modal, ModalBody, ModalFooter, ModalHeader, Form, FormFeedback, FormGroup, FormText, Input, Label } from 'reactstrap';\nvar nameRegex = RegExp(/^[a-zA-Z]+[.]{1}[a-zA-Z]+$/i);\n\nvar validateForm = function validateForm(errors) {\n  var valid = true;\n  Object.values(errors).forEach(function (val) {\n    return val.length > 0 && (valid = false);\n  });\n  return valid;\n};\n\nvar PatternPage = /*#__PURE__*/function (_React$Component) {\n  _inherits(PatternPage, _React$Component);\n\n  function PatternPage() {\n    var _this;\n\n    _classCallCheck(this, PatternPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PatternPage).call(this));\n\n    _this.handleChange = function (event) {\n      event.preventDefault();\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n      var errors = _this.state.errors;\n\n      switch (name) {\n        case 'name':\n          errors.name = nameRegex.test(value) && _this.state.value !== '' ? '' : 'Vérifier votre Pattern !';\n          break;\n\n        default:\n          break;\n      }\n\n      _this.setState(_defineProperty({\n        errors: errors\n      }, name, value));\n    };\n\n    _this.toggle = function (modalType) {\n      return function () {\n        if (!modalType) {\n          return _this.setState({\n            modal: !_this.state.modal\n          });\n        }\n\n        _this.setState(_defineProperty({}, \"modal_\".concat(modalType), !_this.state[\"modal_\".concat(modalType)]));\n      };\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n      var newPattern = {\n        name: _this.state.name\n      };\n\n      if (validateForm(_this.state.errors) && _this.isEmpty()) {\n        addPattern(newPattern).then(function (res) {\n          window.location.reload();\n        });\n      }\n    };\n\n    _this.state = {\n      patterns: [],\n      name: '',\n      errors: {\n        name: ''\n      },\n      modal: false,\n      modal_backdrop: false,\n      modal_nested_parent: false,\n      modal_nested: false\n    }; //this.onChange = this.onChange.bind(this)\n\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(PatternPage, [{\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      if (this.state.name !== '') return true;else return false;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      getPatterns().then(function (res) {\n        var patterns = res;\n\n        _this2.setState({\n          patterns: patterns\n        });\n      });\n    }\n  }, {\n    key: \"onDelete\",\n    value: function onDelete(id) {\n      var patId = id;\n      deletePattern(patId).then(function (res) {\n        window.location.reload();\n      });\n    }\n  }, {\n    key: \"redirect\",\n    value: function redirect(e) {\n      e.preventDefault();\n      this.props.history.push(\"/home\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          showLogo = _this$props.showLogo,\n          onLogoClick = _this$props.onLogoClick;\n      return /*#__PURE__*/React.createElement(Page, {\n        title: \"Utilisateurs\",\n        breadcrumbs: [{\n          name: 'Email Pattern',\n          active: true\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: 6,\n        sm: 6,\n        xs: 12,\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 15\n        }\n      }, \"Mes Email Patterns\"), /*#__PURE__*/React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Table, {\n        dark: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"thead\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 23\n        }\n      }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 23\n        }\n      }, \"Pattern\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 23\n        }\n      }, \"Date d'Ajout\"), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(\"th\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 23\n        }\n      }))), /*#__PURE__*/React.createElement(\"tbody\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 19\n        }\n      }, this.state.patterns.map(function (user) {\n        return /*#__PURE__*/React.createElement(\"tr\", {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"th\", {\n          scope: \"row\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 27\n          }\n        }), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 27\n          }\n        }, user.name), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 27\n          }\n        }, moment(user.date).format('DD/MM/YYYY h:mm a')), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          color: \"danger\",\n          onClick: function onClick(e) {\n            return window.confirm(\"Êtes vous sûr de supprimer cet élement ? Cette action est irréversible\") && _this3.onDelete(user._id);\n          },\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 31\n          }\n        }, \"Supprimer\")), /*#__PURE__*/React.createElement(\"td\", {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(Button, {\n          color: \"info\",\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 31\n          }\n        }, \"Bloquer l'acc\\xE9s\")));\n      })))))), /*#__PURE__*/React.createElement(Col, {\n        md: 6,\n        sm: 6,\n        xs: 12,\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 15\n        }\n      }, \"Ajouter un nouveau Pattern\", /*#__PURE__*/React.createElement(Form, {\n        onSubmit: this.handleSubmit,\n        noValidate: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 17\n        }\n      }, showLogo && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-center pb-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: logo200Image,\n        className: \"rounded\",\n        style: {\n          width: 80,\n          height: 80,\n          cursor: 'pointer'\n        },\n        alt: \"logo\",\n        onClick: onLogoClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 23\n        }\n      })), /*#__PURE__*/React.createElement(FormGroup, {\n        row: true,\n        style: {\n          marginTop: 20\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"exampleEmail\",\n        sm: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 21\n        }\n      }, \"Pattern\"), /*#__PURE__*/React.createElement(Col, {\n        sm: 10,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        type: \"text\",\n        name: \"name\",\n        value: this.state.name,\n        onChange: this.handleChange,\n        noValidate: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 23\n        }\n      }), this.state.errors.name.length > 0 && /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          fontSize: 12,\n          color: \"red\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 25\n        }\n      }, this.state.errors.name))), /*#__PURE__*/React.createElement(FormGroup, {\n        check: true,\n        row: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        sm: {\n          size: 10,\n          offset: 2\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        color: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 23\n        }\n      }, \"Enregister\"))))), /*#__PURE__*/React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 15\n        }\n      })))));\n    }\n  }]);\n\n  return PatternPage;\n}(React.Component);\n\nexport default withRouter(PatternPage);","map":{"version":3,"sources":["C:/Users/yosrj/Desktop/IOT_Lab/react-reduction/src/pages/PatternsPage.js"],"names":["Page","logo200Image","carte","PropTypes","React","moment","addPattern","getPatterns","deletePattern","withRouter","Link","Button","Card","CardBody","CardHeader","Col","Row","Table","CardText","Modal","ModalBody","ModalFooter","ModalHeader","Form","FormFeedback","FormGroup","FormText","Input","Label","nameRegex","RegExp","validateForm","errors","valid","Object","values","forEach","val","length","PatternPage","handleChange","event","preventDefault","target","name","value","state","test","setState","toggle","modalType","modal","handleSubmit","newPattern","isEmpty","then","res","window","location","reload","patterns","modal_backdrop","modal_nested_parent","modal_nested","bind","id","patId","e","props","history","push","showLogo","onLogoClick","active","map","user","date","format","confirm","onDelete","_id","width","height","cursor","marginTop","fontSize","color","size","offset","Component"],"mappings":";;;;;;;;AAAA,OAAOA,IAAP,MAAiB,iBAAjB;AACA,OAAOC,YAAP,MAAyB,8BAAzB;AACA,OAAOC,KAAP,MAAkB,sCAAlB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAO,KAAKC,MAAZ,MAAwB,QAAxB;AACA,SAASC,UAAT,EAAqBC,WAArB,EAAiCC,aAAjC,QAAsD,0BAAtD;AACA,SAASC,UAAT,EAAqBC,IAArB,QAAiC,kBAAjC;AACA,SACEC,MADF,EAEEC,IAFF,EAGEC,QAHF,EAIEC,UAJF,EAKEC,GALF,EAMEC,GANF,EAOEC,KAPF,EAQEC,QARF,EASEC,KATF,EAUEC,SAVF,EAWEC,WAXF,EAYEC,WAZF,EAaEC,IAbF,EAcEC,YAdF,EAeEC,SAfF,EAgBEC,QAhBF,EAiBEC,KAjBF,EAkBEC,KAlBF,QAmBO,YAnBP;AAoBA,IAAMC,SAAS,GAAGC,MAAM,CAAC,6BAAD,CAAxB;;AACA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,MAAD,EAAY;AAC/B,MAAIC,KAAK,GAAG,IAAZ;AACAC,EAAAA,MAAM,CAACC,MAAP,CAAcH,MAAd,EAAsBI,OAAtB,CACE,UAACC,GAAD;AAAA,WAASA,GAAG,CAACC,MAAJ,GAAa,CAAb,KAAmBL,KAAK,GAAG,KAA3B,CAAT;AAAA,GADF;AAGA,SAAOA,KAAP;AACD,CAND;;IAOMM,W;;;AACJ,yBAAc;AAAA;;AAAA;;AACZ;;AADY,UAiBdC,YAjBc,GAiBC,UAACC,KAAD,EAAW;AACxBA,MAAAA,KAAK,CAACC,cAAN;AADwB,0BAEAD,KAAK,CAACE,MAFN;AAAA,UAEhBC,IAFgB,iBAEhBA,IAFgB;AAAA,UAEVC,KAFU,iBAEVA,KAFU;AAGxB,UAAIb,MAAM,GAAG,MAAKc,KAAL,CAAWd,MAAxB;;AAEA,cAAQY,IAAR;AACE,aAAK,MAAL;AACEZ,UAAAA,MAAM,CAACY,IAAP,GACEf,SAAS,CAACkB,IAAV,CAAeF,KAAf,KAAyB,MAAKC,KAAL,CAAWD,KAAX,KAAqB,EAA9C,GACI,EADJ,GAEI,0BAHN;AAIA;;AACF;AACE;AARJ;;AAUA,YAAKG,QAAL;AAAgBhB,QAAAA,MAAM,EAANA;AAAhB,SAAyBY,IAAzB,EAAgCC,KAAhC;AACD,KAjCa;;AAAA,UAgDdI,MAhDc,GAgDL,UAAAC,SAAS;AAAA,aAAI,YAAM;AAC1B,YAAI,CAACA,SAAL,EAAgB;AACd,iBAAO,MAAKF,QAAL,CAAc;AACnBG,YAAAA,KAAK,EAAE,CAAC,MAAKL,KAAL,CAAWK;AADA,WAAd,CAAP;AAGD;;AACD,cAAKH,QAAL,qCACYE,SADZ,GAC0B,CAAC,MAAKJ,KAAL,iBAAoBI,SAApB,EAD3B;AAGD,OATiB;AAAA,KAhDJ;;AAAA,UA2DdE,YA3Dc,GA2DC,UAAAX,KAAK,EAAI;AACtBA,MAAAA,KAAK,CAACC,cAAN;AACA,UAAMW,UAAU,GAAG;AACjBT,QAAAA,IAAI,EAAE,MAAKE,KAAL,CAAWF;AADA,OAAnB;;AAGA,UAAIb,YAAY,CAAC,MAAKe,KAAL,CAAWd,MAAZ,CAAZ,IAAmC,MAAKsB,OAAL,EAAvC,EAAuD;AACrDhD,QAAAA,UAAU,CAAC+C,UAAD,CAAV,CAAuBE,IAAvB,CAA4B,UAAAC,GAAG,EAAI;AACjCC,UAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD,SAFD;AAGD;AACF,KArEa;;AAEZ,UAAKb,KAAL,GAAa;AACXc,MAAAA,QAAQ,EAAE,EADC;AAEXhB,MAAAA,IAAI,EAAE,EAFK;AAGXZ,MAAAA,MAAM,EAAE;AAAEY,QAAAA,IAAI,EAAE;AAAR,OAHG;AAIXO,MAAAA,KAAK,EAAE,KAJI;AAKXU,MAAAA,cAAc,EAAE,KALL;AAMXC,MAAAA,mBAAmB,EAAE,KANV;AAOXC,MAAAA,YAAY,EAAE;AAPH,KAAb,CAFY,CAYZ;;AACA,UAAKX,YAAL,GAAoB,MAAKA,YAAL,CAAkBY,IAAlB,uDAApB;AAbY;AAcb;;;;8BAoBS;AACR,UAAI,KAAKlB,KAAL,CAAWF,IAAX,KAAoB,EAAxB,EACE,OAAO,IAAP,CADF,KAGE,OAAO,KAAP;AACH;;;wCACmB;AAAA;;AAClBrC,MAAAA,WAAW,GACRgD,IADH,CACQ,UAAAC,GAAG,EAAI;AACX,YAAMI,QAAQ,GAAGJ,GAAjB;;AACA,QAAA,MAAI,CAACR,QAAL,CAAc;AAAEY,UAAAA,QAAQ,EAARA;AAAF,SAAd;AACD,OAJH;AAMD;;;6BAuBQK,E,EAAI;AACX,UAAMC,KAAK,GAAGD,EAAd;AACAzD,MAAAA,aAAa,CAAC0D,KAAD,CAAb,CAAqBX,IAArB,CAA0B,UAAAC,GAAG,EAAI;AAC7BC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACH,OAFD;AAGH;;;6BACUQ,C,EAAG;AACVA,MAAAA,CAAC,CAACzB,cAAF;AACA,WAAK0B,KAAL,CAAWC,OAAX,CAAmBC,IAAnB;AACD;;;6BAEQ;AAAA;;AAAA,wBAKH,KAAKF,KALF;AAAA,UAGLG,QAHK,eAGLA,QAHK;AAAA,UAILC,WAJK,eAILA,WAJK;AAMP,0BACE,oBAAC,IAAD;AAAM,QAAA,KAAK,EAAC,cAAZ;AAA2B,QAAA,WAAW,EAAE,CAAC;AAAE5B,UAAAA,IAAI,EAAE,eAAR;AAAyB6B,UAAAA,MAAM,EAAE;AAAjC,SAAD,CAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAGE,oBAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,CAAT;AAAY,QAAA,EAAE,EAAE,CAAhB;AAAmB,QAAA,EAAE,EAAE,EAAvB;AAA2B,QAAA,SAAS,EAAC,MAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BADF,eAEE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,KAAD;AAAO,QAAA,IAAI,MAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAJF,eAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QALF,CADF,CADF,eAUE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEG,KAAK3B,KAAL,CAAWc,QAAX,CAAoBc,GAApB,CAAwB,UAAAC,IAAI,EAAI;AAE/B,4BACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBACE;AAAI,UAAA,KAAK,EAAC,KAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKA,IAAI,CAAC/B,IAAV,CAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAAKvC,MAAM,CAACsE,IAAI,CAACC,IAAN,CAAN,CAAkBC,MAAlB,CAAyB,mBAAzB,CAAL,CAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAI,oBAAC,MAAD;AAAQ,UAAA,KAAK,EAAC,QAAd;AAAuB,UAAA,OAAO,EAAE,iBAAAV,CAAC;AAAA,mBACnCV,MAAM,CAACqB,OAAP,CAAe,wEAAf,KACA,MAAI,CAACC,QAAL,CAAcJ,IAAI,CAACK,GAAnB,CAFmC;AAAA,WAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAAJ,CAJF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAI,oBAAC,MAAD;AAAQ,UAAA,KAAK,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAAJ,CARF,CADF;AAWD,OAbA,CAFH,CAVF,CADF,CAFF,CADF,CADF,eAqCE,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,CAAT;AAAY,QAAA,EAAE,EAAE,CAAhB;AAAmB,QAAA,EAAE,EAAE,EAAvB;AAA2B,QAAA,SAAS,EAAC,MAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAEE,oBAAC,IAAD;AAAM,QAAA,QAAQ,EAAE,KAAK5B,YAArB;AAAmC,QAAA,UAAU,MAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACGmB,QAAQ,iBACP;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE;AACE,QAAA,GAAG,EAAEtE,YADP;AAEE,QAAA,SAAS,EAAC,SAFZ;AAGE,QAAA,KAAK,EAAE;AAAEgF,UAAAA,KAAK,EAAE,EAAT;AAAaC,UAAAA,MAAM,EAAE,EAArB;AAAyBC,UAAAA,MAAM,EAAE;AAAjC,SAHT;AAIE,QAAA,GAAG,EAAC,MAJN;AAKE,QAAA,OAAO,EAAEX,WALX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAFJ,eAYE,oBAAC,SAAD;AAAW,QAAA,GAAG,MAAd;AAAe,QAAA,KAAK,EAAE;AAAEY,UAAAA,SAAS,EAAE;AAAb,SAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,KAAD;AAAO,QAAA,GAAG,EAAC,cAAX;AAA0B,QAAA,EAAE,EAAE,CAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAIE,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE,EAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,KAAD;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,IAAI,EAAC,MAFP;AAGE,QAAA,KAAK,EAAE,KAAKtC,KAAL,CAAWF,IAHpB;AAIE,QAAA,QAAQ,EAAE,KAAKJ,YAJjB;AAKE,QAAA,UAAU,MALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAQG,KAAKM,KAAL,CAAWd,MAAX,CAAkBY,IAAlB,CAAuBN,MAAvB,GAAgC,CAAhC,iBACC;AAAM,QAAA,KAAK,EAAE;AAAE+C,UAAAA,QAAQ,EAAE,EAAZ;AAAgBC,UAAAA,KAAK,EAAE;AAAvB,SAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAA8C,KAAKxC,KAAL,CAAWd,MAAX,CAAkBY,IAAhE,CATJ,CAJF,CAZF,eA6BE,oBAAC,SAAD;AAAW,QAAA,KAAK,MAAhB;AAAiB,QAAA,GAAG,MAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,GAAD;AAAK,QAAA,EAAE,EAAE;AAAE2C,UAAAA,IAAI,EAAE,EAAR;AAAYC,UAAAA,MAAM,EAAE;AAApB,SAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACE,oBAAC,MAAD;AAAQ,QAAA,KAAK,EAAC,SAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,CADF,CA7BF,CAFF,CADF,eAwCE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAxCF,CADF,CArCF,CAHF,CADF;AA2FD;;;;EAnLuBpF,KAAK,CAACqF,S;;AAwLhC,eAAehF,UAAU,CAAC8B,WAAD,CAAzB","sourcesContent":["import Page from 'components/Page';\r\nimport logo200Image from 'assets/img/logo/logo_200.png';\r\nimport carte from 'assets/img/products/raspberry pi.PNG';\r\nimport PropTypes from 'prop-types';\r\nimport React from 'react';\r\nimport * as moment from 'moment'\r\nimport { addPattern, getPatterns,deletePattern } from 'components/UserFunctions';\r\nimport { withRouter, Link } from \"react-router-dom\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  CardHeader,\r\n  Col,\r\n  Row,\r\n  Table,\r\n  CardText,\r\n  Modal,\r\n  ModalBody,\r\n  ModalFooter,\r\n  ModalHeader,\r\n  Form,\r\n  FormFeedback,\r\n  FormGroup,\r\n  FormText,\r\n  Input,\r\n  Label,\r\n} from 'reactstrap';\r\nconst nameRegex = RegExp(/^[a-zA-Z]+[.]{1}[a-zA-Z]+$/i);\r\nconst validateForm = (errors) => {\r\n  let valid = true;\r\n  Object.values(errors).forEach(\r\n    (val) => val.length > 0 && (valid = false)\r\n  );\r\n  return valid;\r\n}\r\nclass PatternPage extends React.Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      patterns: [],\r\n      name: '',\r\n      errors: { name: '', },\r\n      modal: false,\r\n      modal_backdrop: false,\r\n      modal_nested_parent: false,\r\n      modal_nested: false,\r\n    }\r\n\r\n    //this.onChange = this.onChange.bind(this)\r\n    this.handleSubmit = this.handleSubmit.bind(this)\r\n  }\r\n\r\n\r\n  handleChange = (event) => {\r\n    event.preventDefault();\r\n    const { name, value } = event.target;\r\n    let errors = this.state.errors;\r\n\r\n    switch (name) {\r\n      case 'name':\r\n        errors.name =\r\n          nameRegex.test(value) && this.state.value !== ''\r\n            ? ''\r\n            : 'Vérifier votre Pattern !';\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    this.setState({ errors, [name]: value });\r\n  }\r\n  isEmpty() {\r\n    if (this.state.name !== '')\r\n      return true\r\n    else\r\n      return false\r\n  }\r\n  componentDidMount() {\r\n    getPatterns()\r\n      .then(res => {\r\n        const patterns = res;\r\n        this.setState({ patterns });\r\n      })\r\n\r\n  }\r\n  toggle = modalType => () => {\r\n    if (!modalType) {\r\n      return this.setState({\r\n        modal: !this.state.modal,\r\n      });\r\n    }\r\n    this.setState({\r\n      [`modal_${modalType}`]: !this.state[`modal_${modalType}`],\r\n    });\r\n  };\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    const newPattern = {\r\n      name: this.state.name,\r\n    }\r\n    if (validateForm(this.state.errors) && this.isEmpty()) {\r\n      addPattern(newPattern).then(res => {\r\n        window.location.reload();\r\n      })\r\n    }\r\n  };\r\n  onDelete(id) {\r\n    const patId = id\r\n    deletePattern(patId).then(res => {\r\n        window.location.reload();\r\n    })\r\n}\r\n  redirect(e) {\r\n    e.preventDefault()\r\n    this.props.history.push(`/home`)\r\n  }\r\n\r\n  render() {\r\n\r\n    const {\r\n      showLogo,\r\n      onLogoClick,\r\n    } = this.props;\r\n    return (\r\n      <Page title=\"Utilisateurs\" breadcrumbs={[{ name: 'Email Pattern', active: true }]}>\r\n\r\n\r\n        <Row>\r\n          <Col md={6} sm={6} xs={12} className=\"mb-3\">\r\n            <Card>\r\n              <CardHeader>Mes Email Patterns</CardHeader>\r\n              <CardBody>\r\n                <Table dark>\r\n                  <thead>\r\n                    <tr>\r\n                      <th>#</th>\r\n                      <th>Pattern</th>\r\n                      <th>Date d'Ajout</th>\r\n                      <th></th>\r\n                      <th></th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n\r\n                    {this.state.patterns.map(user => {\r\n\r\n                      return (\r\n                        <tr>\r\n                          <th scope=\"row\"></th>\r\n                          <td>{user.name}</td>\r\n                          <td>{moment(user.date).format('DD/MM/YYYY h:mm a')}</td>\r\n                          <td><Button color=\"danger\" onClick={e =>\r\n                            window.confirm(\"Êtes vous sûr de supprimer cet élement ? Cette action est irréversible\") &&\r\n                            this.onDelete(user._id)\r\n                          }>Supprimer</Button></td>\r\n                          <td><Button color=\"info\">Bloquer l'accés</Button></td>\r\n                        </tr>);\r\n                    })}\r\n\r\n                  </tbody>\r\n                </Table>\r\n              </CardBody>\r\n            </Card>\r\n          </Col>\r\n          <Col md={6} sm={6} xs={12} className=\"mb-3\">\r\n            <Card>\r\n              <CardHeader>Ajouter un nouveau Pattern\r\n\r\n                <Form onSubmit={this.handleSubmit} noValidate >\r\n                  {showLogo && (\r\n                    <div className=\"text-center pb-4\">\r\n                      <img\r\n                        src={logo200Image}\r\n                        className=\"rounded\"\r\n                        style={{ width: 80, height: 80, cursor: 'pointer' }}\r\n                        alt=\"logo\"\r\n                        onClick={onLogoClick}\r\n                      />\r\n                    </div>\r\n                  )}\r\n                  <FormGroup row style={{ marginTop: 20 }}>\r\n                    <Label for=\"exampleEmail\" sm={2}>\r\n                      Pattern\r\n                      </Label>\r\n                    <Col sm={10}>\r\n                      <Input\r\n                        type=\"text\"\r\n                        name=\"name\"\r\n                        value={this.state.name}\r\n                        onChange={this.handleChange}\r\n                        noValidate\r\n                      />\r\n                      {this.state.errors.name.length > 0 &&\r\n                        <span style={{ fontSize: 12, color: \"red\" }}>{this.state.errors.name}</span>}\r\n                    </Col>\r\n                  </FormGroup>\r\n\r\n                  <FormGroup check row>\r\n                    <Col sm={{ size: 10, offset: 2 }}>\r\n                      <Button color=\"primary\">Enregister</Button>\r\n                    </Col>\r\n                  </FormGroup>\r\n                </Form>\r\n\r\n              </CardHeader>\r\n              <CardBody>\r\n\r\n              </CardBody>\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n      </Page>\r\n\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\nexport default withRouter(PatternPage);\r\n"]},"metadata":{},"sourceType":"module"}