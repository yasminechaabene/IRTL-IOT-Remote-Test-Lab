{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\src\\\\pages\\\\EditCard.js\";\nimport logo200Image from 'assets/img/users/user.png';\nimport React from 'react';\nimport { withRouter } from \"react-router-dom\";\nimport { Button, Card, CardHeader, Col, Form, FormGroup, Input, Label, Row } from 'reactstrap';\nimport axios from 'axios';\nvar ipRegex = RegExp(/^(?:[0-9]{1,3}\\.){3}[0-9]{1,3}$/i);\n\nvar validateForm = function validateForm(errors) {\n  var valid = true;\n  Object.values(errors).forEach(function (val) {\n    return val.length > 0 && (valid = false);\n  });\n  return valid;\n};\n\nvar EditCard = /*#__PURE__*/function (_React$Component) {\n  _inherits(EditCard, _React$Component);\n\n  function EditCard() {\n    var _this;\n\n    _classCallCheck(this, EditCard);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EditCard).call(this));\n\n    _this.handleChange = function (event) {\n      event.preventDefault();\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n      var errors = _this.state.errors;\n\n      switch (name) {\n        case 'name':\n          errors.name = value.length > 4 ? '' : 'Vérifier le nom !';\n          break;\n\n        case 'ip':\n          errors.ip = ipRegex.test(value) ? '' : 'Vérifier IP Carte';\n          break;\n\n        default:\n          break;\n      }\n\n      _this.setState(_defineProperty({\n        errors: errors\n      }, name, value));\n    };\n\n    _this.toggle = function (modalType) {\n      return function () {\n        if (!modalType) {\n          return _this.setState({\n            modal: !_this.state.modal\n          });\n        }\n\n        _this.setState(_defineProperty({}, \"modal_\".concat(modalType), !_this.state[\"modal_\".concat(modalType)]));\n      };\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n      var params = _this.props.match.params;\n\n      if (validateForm(_this.state.errors) && _this.isEmpty()) {\n        var newCard = {\n          // model: this.state.model,\n          status: _this.state.status,\n          name: _this.state.name,\n          ip: _this.state.ip\n        };\n        axios.post(\"/cards/editCard/\".concat(params.card), {\n          name: newCard.name,\n          status: newCard.status,\n          ip: newCard.ip\n        }).then(function (response) {\n          console.log('Card edited');\n\n          _this.props.history.push(\"/cardlist\");\n        }).catch(function (err) {\n          console.log(err);\n        });\n      }\n      /* const formData = new FormData()\r\n       formData.append('profileImg', this.state.profileImg)\r\n       axios.post(\"http://localhost:5000/users/user-profile\", formData, {\r\n         first_name:this.state.first_name,\r\n         last_name:this.state.last_name,\r\n         email:this.state.email,\r\n         password:this.state.password\r\n       }).then(res => {\r\n         localStorage.removeItem('usertoken')\r\n         this.props.history.push(`/login`)\r\n            \r\n       }) */\n\n    };\n\n    _this.state = {\n      name: '',\n      ip: '',\n      card: {},\n      status: true,\n      model: 0,\n      errors: {\n        name: '',\n        ip: ''\n      },\n      modal: false,\n      modal_backdrop: false,\n      modal_nested_parent: false,\n      modal_nested: false,\n      backdrop: true\n    };\n    _this.onFileChange = _this.onFileChange.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(EditCard, [{\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      if (this.state.name !== '' && this.state.ip !== '') return true;else return false;\n    }\n  }, {\n    key: \"onFileChange\",\n    value: function onFileChange(e) {\n      this.setState({\n        profileImg: e.target.files[0]\n      });\n    }\n  }, {\n    key: \"redirect\",\n    value: function redirect(e) {\n      e.preventDefault();\n      localStorage.removeItem('usertoken');\n      this.props.history.push(\"/login\");\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var params = this.props.match.params;\n      axios.get(\"/cards/getCardById/\".concat(params.card)).then(function (res) {\n        // console.log('card', card);\n        _this2.setState({\n          card: res.data.card\n        });\n\n        _this2.setState({\n          name: _this2.state.card.name\n        });\n\n        _this2.setState({\n          status: _this2.state.card.status\n        });\n\n        _this2.setState({\n          ip: _this2.state.card.ip\n        });\n      });\n    }\n  }, {\n    key: \"renderButtonText\",\n    value: function renderButtonText() {\n      var buttonText = this.props.buttonText;\n\n      if (!buttonText && this.isLogin) {\n        return 'Connexion';\n      }\n\n      if (!buttonText && this.isSignup) {\n        return 'Inscription';\n      }\n\n      return buttonText;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          showLogo = _this$props.showLogo,\n          onLogoClick = _this$props.onLogoClick;\n      return /*#__PURE__*/React.createElement(Row, {\n        style: {\n          height: '100vh',\n          justifyContent: 'center',\n          alignItems: 'center'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        style: {\n          width: 750,\n          height: 400,\n          marginTop: 75\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }\n      }, \"Modifier Carte\"), /*#__PURE__*/React.createElement(Form, {\n        onSubmit: this.handleSubmit,\n        noValidate: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }\n      }, showLogo && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-center pb-4\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: logo200Image,\n        className: \"rounded\",\n        style: {\n          width: 80,\n          height: 80,\n          cursor: 'pointer'\n        },\n        alt: \"logo\",\n        onClick: onLogoClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 17\n        }\n      })), /*#__PURE__*/React.createElement(FormGroup, {\n        row: true,\n        style: {\n          marginTop: 20\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"exampleEmail\",\n        sm: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 15\n        }\n      }, \"Nom\"), /*#__PURE__*/React.createElement(Col, {\n        sm: 10,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        type: \"text\",\n        name: \"name\",\n        value: this.state.name,\n        onChange: this.handleChange,\n        noValidate: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 17\n        }\n      }), this.state.errors.name.length > 0 && /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          fontSize: 12,\n          color: \"red\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 19\n        }\n      }, this.state.errors.name))), /*#__PURE__*/React.createElement(FormGroup, {\n        row: true,\n        style: {\n          marginTop: 20\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"exampleEmail\",\n        sm: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 15\n        }\n      }, \"IP\"), /*#__PURE__*/React.createElement(Col, {\n        sm: 10,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        type: \"text\",\n        name: \"ip\",\n        value: this.state.ip,\n        onChange: this.handleChange,\n        noValidate: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 17\n        }\n      }), this.state.errors.ip.length > 0 && /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          fontSize: 12,\n          color: \"red\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 19\n        }\n      }, this.state.errors.ip))), /*#__PURE__*/React.createElement(FormGroup, {\n        row: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"exampleSelect\",\n        sm: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 15\n        }\n      }, \"Disponibilit\\xE9\"), /*#__PURE__*/React.createElement(Col, {\n        sm: 10,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        type: \"select\",\n        name: \"status\",\n        value: this.state.status,\n        onChange: this.handleChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"true\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 19\n        }\n      }, \"Disponible\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"false\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 19\n        }\n      }, \"Indisponible\")))), /*#__PURE__*/React.createElement(FormGroup, {\n        check: true,\n        row: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        sm: {\n          size: 10,\n          offset: 2\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 17\n        }\n      }, \"Enregister\"))))));\n    }\n  }]);\n\n  return EditCard;\n}(React.Component);\n\nexport default withRouter(EditCard);","map":{"version":3,"sources":["C:/Users/yosrj/Desktop/IOT_Lab/react-reduction/src/pages/EditCard.js"],"names":["logo200Image","React","withRouter","Button","Card","CardHeader","Col","Form","FormGroup","Input","Label","Row","axios","ipRegex","RegExp","validateForm","errors","valid","Object","values","forEach","val","length","EditCard","handleChange","event","preventDefault","target","name","value","state","ip","test","setState","toggle","modalType","modal","handleSubmit","params","props","match","isEmpty","newCard","status","post","card","then","response","console","log","history","push","catch","err","model","modal_backdrop","modal_nested_parent","modal_nested","backdrop","onFileChange","bind","e","profileImg","files","localStorage","removeItem","get","res","data","buttonText","isLogin","isSignup","showLogo","onLogoClick","height","justifyContent","alignItems","width","marginTop","cursor","fontSize","color","size","offset","Component"],"mappings":"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","sourcesContent":["import logo200Image from 'assets/img/users/user.png';\r\nimport React from 'react';\r\nimport { withRouter } from \"react-router-dom\";\r\nimport {\r\n  Button,\r\n  Card,\r\n  CardHeader,\r\n  Col,\r\n  Form,\r\n  FormGroup,\r\n  Input,\r\n  Label,\r\n  Row,\r\n} from 'reactstrap';\r\nimport axios from 'axios';\r\nconst ipRegex = RegExp(/^(?:[0-9]{1,3}\\.){3}[0-9]{1,3}$/i);\r\nconst validateForm = (errors) => {\r\n  let valid = true;\r\n  Object.values(errors).forEach(\r\n    (val) => val.length > 0 && (valid = false)\r\n  );\r\n  return valid;\r\n}\r\nclass EditCard extends React.Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      name: '',\r\n      ip: '',\r\n      card: {},\r\n      status: true,\r\n      model: 0,\r\n      errors: {\r\n        name: '',\r\n        ip:'',\r\n      },\r\n      modal: false,\r\n      modal_backdrop: false,\r\n      modal_nested_parent: false,\r\n      modal_nested: false,\r\n      backdrop: true,\r\n    }\r\n    this.onFileChange = this.onFileChange.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this)\r\n  }\r\n  handleChange = (event) => {\r\n    event.preventDefault();\r\n    const { name, value } = event.target;\r\n    let errors = this.state.errors;\r\n\r\n    switch (name) {\r\n      case 'name':\r\n        errors.name =\r\n          value.length > 4\r\n            ? ''\r\n            : 'Vérifier le nom !';\r\n        break;\r\n        case 'ip':\r\n          errors.ip =\r\n            ipRegex.test(value)\r\n              ? ''\r\n              : 'Vérifier IP Carte';\r\n          break;\r\n      default:\r\n        break;\r\n    }\r\n    this.setState({ errors, [name]: value });\r\n  }\r\n  isEmpty() {\r\n    if (this.state.name !== '' && this.state.ip !== '')\r\n      return true\r\n    else\r\n      return false\r\n  }\r\n  onFileChange(e) {\r\n    this.setState({ profileImg: e.target.files[0] })\r\n  }\r\n  redirect(e) {\r\n    e.preventDefault()\r\n    localStorage.removeItem('usertoken')\r\n    this.props.history.push(`/login`)\r\n  }\r\n  toggle = modalType => () => {\r\n    if (!modalType) {\r\n      return this.setState({\r\n        modal: !this.state.modal,\r\n      });\r\n    }\r\n    this.setState({\r\n      [`modal_${modalType}`]: !this.state[`modal_${modalType}`],\r\n    });\r\n  };\r\n\r\n  componentDidMount() {\r\n    const { match: { params } } = this.props;\r\n\r\n    axios.get(`/cards/getCardById/${params.card}`)\r\n      .then(res => {\r\n       // console.log('card', card);\r\n  \r\n        this.setState({ card :res.data.card});\r\n        this.setState({name:this.state.card.name})\r\n        this.setState({status:this.state.card.status})\r\n        this.setState({ip:this.state.card.ip})\r\n      });\r\n  }\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    const { match: { params } } = this.props;\r\n    if (validateForm(this.state.errors) && this.isEmpty()) {\r\n      const newCard = {\r\n       // model: this.state.model,\r\n        status: this.state.status,\r\n        name: this.state.name,\r\n        ip: this.state.ip,\r\n      }\r\n  \r\n      axios.post(`/cards/editCard/${params.card}`, {\r\n        name: newCard.name,\r\n        status: newCard.status,\r\n        ip:newCard.ip,\r\n      })\r\n      .then(response => {\r\n        console.log('Card edited')\r\n        this.props.history.push(`/cardlist`)\r\n      }).catch(err => {\r\n        console.log(err)\r\n      })\r\n    \r\n    }\r\n    /* const formData = new FormData()\r\n     formData.append('profileImg', this.state.profileImg)\r\n     axios.post(\"http://localhost:5000/users/user-profile\", formData, {\r\n       first_name:this.state.first_name,\r\n       last_name:this.state.last_name,\r\n       email:this.state.email,\r\n       password:this.state.password\r\n     }).then(res => {\r\n       localStorage.removeItem('usertoken')\r\n       this.props.history.push(`/login`)\r\n          \r\n     }) */\r\n\r\n\r\n  };\r\n\r\n  renderButtonText() {\r\n    const { buttonText } = this.props;\r\n\r\n    if (!buttonText && this.isLogin) {\r\n      return 'Connexion';\r\n    }\r\n\r\n    if (!buttonText && this.isSignup) {\r\n      return 'Inscription';\r\n    }\r\n\r\n    return buttonText;\r\n  }\r\n\r\n  render() {\r\n    const {\r\n      showLogo,\r\n      onLogoClick,\r\n    } = this.props;\r\n\r\n    return (\r\n      <Row\r\n        style={{\r\n          height: '100vh',\r\n          justifyContent: 'center',\r\n          alignItems: 'center',\r\n        }}>\r\n        <Card style={{ width: 750, height: 400, marginTop: 75 }}>\r\n          <CardHeader>Modifier Carte</CardHeader>\r\n \r\n          <Form onSubmit={this.handleSubmit} noValidate >\r\n            {showLogo && (\r\n              <div className=\"text-center pb-4\">\r\n                <img\r\n                  src={logo200Image}\r\n                  className=\"rounded\"\r\n                  style={{ width: 80, height: 80, cursor: 'pointer' }}\r\n                  alt=\"logo\"\r\n                  onClick={onLogoClick}\r\n                />\r\n              </div>\r\n            )}\r\n            <FormGroup row style={{ marginTop: 20 }}>\r\n              <Label for=\"exampleEmail\" sm={2}>\r\n                Nom\r\n                      </Label>\r\n              <Col sm={10}>\r\n                <Input\r\n                  type=\"text\"\r\n                  name=\"name\"\r\n                  value={this.state.name}\r\n                  onChange={this.handleChange}\r\n                  noValidate\r\n                />\r\n                {this.state.errors.name.length > 0 &&\r\n                  <span style={{ fontSize: 12, color: \"red\" }}>{this.state.errors.name}</span>}\r\n              </Col>\r\n            </FormGroup>\r\n            <FormGroup row style={{ marginTop: 20 }}>\r\n              <Label for=\"exampleEmail\" sm={2}>\r\n                IP\r\n                      </Label>\r\n              <Col sm={10}>\r\n                <Input\r\n                  type=\"text\"\r\n                  name=\"ip\"\r\n                  value={this.state.ip}\r\n                  onChange={this.handleChange}\r\n                  noValidate\r\n                />\r\n                {this.state.errors.ip.length > 0 &&\r\n                  <span style={{ fontSize: 12, color: \"red\" }}>{this.state.errors.ip}</span>}\r\n              </Col>\r\n            </FormGroup>\r\n\r\n            <FormGroup row>\r\n              <Label for=\"exampleSelect\" sm={2}>\r\n               Disponibilité\r\n                  </Label>\r\n              <Col sm={10}>\r\n                <Input type=\"select\" name=\"status\" value={this.state.status} onChange={this.handleChange} >\r\n                  <option value=\"true\">Disponible</option>\r\n                  <option value=\"false\">Indisponible</option>\r\n                </Input>\r\n              </Col>\r\n            </FormGroup>\r\n\r\n            <FormGroup check row>\r\n              <Col sm={{ size: 10, offset: 2 }}>\r\n                <Button>Enregister</Button>\r\n              </Col>\r\n            </FormGroup>\r\n          </Form>\r\n      \r\n        </Card>\r\n\r\n      </Row>\r\n\r\n\r\n\r\n    );\r\n  }\r\n}\r\n\r\n\r\n\r\nexport default withRouter(EditCard);\r\n"]},"metadata":{},"sourceType":"module"}