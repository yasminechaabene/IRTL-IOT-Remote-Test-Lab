{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\src\\\\pages\\\\DashboardPage.js\";\nimport { AnnouncementCard, TodosCard } from 'components/Card';\nimport HorizontalAvatarList from 'components/HorizontalAvatarList';\nimport MapWithBubbles from 'components/MapWithBubbles';\nimport Page from 'components/Page';\nimport ProductMedia from 'components/ProductMedia';\nimport SupportTicket from 'components/SupportTicket';\nimport UserProgressTable from 'components/UserProgressTable';\nimport { IconWidget, NumberWidget } from 'components/Widget';\nimport { getStackLineChart, stackLineChartOptions } from 'demos/chartjs';\nimport jwt_decode from 'jwt-decode';\nimport { avatarsData, chartjs, productsData, supportTicketsData, todosData, userProgressTableData } from 'demos/dashboardPage';\nimport React from 'react';\nimport { Route, Link, withRouter, Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport { Bar, Line } from 'react-chartjs-2';\nimport { MdBubbleChart, MdInsertChart, MdPersonPin, MdPieChart, MdRateReview, MdShare, MdShowChart, MdThumbUp } from 'react-icons/md';\nimport InfiniteCalendar from 'react-infinite-calendar';\nimport { Badge, Button, Card, CardBody, CardDeck, CardGroup, CardHeader, CardTitle, Col, ListGroup, ListGroupItem, Row, Form, FormGroup, FormText, Input, Label, CardText } from 'reactstrap';\nimport { getColor } from 'utils/colors';\nimport Image from 'assets/img/bg/IoT.jpeg';\nimport moment from 'moment';\nimport { addRec, getMyReservation } from 'components/UserFunctions';\n\nvar validateForm = function validateForm(errors) {\n  var valid = true;\n  Object.values(errors).forEach(function (val) {\n    return val.length > 0 && (valid = false);\n  });\n  return valid;\n};\n\nvar today = new Date();\nvar lastWeek = new Date(today.getFullYear(), today.getMonth(), today.getDate() - 7);\n\nvar DashboardPage = /*#__PURE__*/function (_React$Component) {\n  _inherits(DashboardPage, _React$Component);\n\n  function DashboardPage() {\n    var _this;\n\n    _classCallCheck(this, DashboardPage);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DashboardPage).call(this));\n\n    _this.handleChange = function (event) {\n      event.preventDefault();\n      var _event$target = event.target,\n          name = _event$target.name,\n          value = _event$target.value;\n      var errors = _this.state.errors;\n\n      switch (name) {\n        case 'objet':\n          errors.objet = value.length > 3 ? '' : 'Vérifier votre Objet !';\n          break;\n\n        case 'rec':\n          errors.rec = value.length > 5 ? '' : 'Contenu Réclamation ne doit pas être vide !';\n          break;\n\n        default:\n          break;\n      }\n\n      _this.setState(_defineProperty({\n        errors: errors\n      }, name, value));\n    };\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n      var token = localStorage.usertoken;\n      var decoded = jwt_decode(token);\n      var newRec = {\n        user: decoded._id,\n        name: _this.state.objet,\n        description: _this.state.rec\n      };\n\n      if (validateForm(_this.state.errors) && _this.isEmpty()) {\n        addRec(newRec).then(function (res) {\n          window.location.reload();\n        });\n      }\n    };\n\n    _this.state = {\n      reservation: [],\n      objet: '',\n      rec: '',\n      email: '',\n      date: '',\n      errors: {\n        objet: '',\n        rec: ''\n      }\n    };\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(DashboardPage, [{\n    key: \"isEmpty\",\n    value: function isEmpty() {\n      if (this.state.objet !== '' && this.state.rec !== '') return true;else return false;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      // this is needed, because InfiniteCalendar forces window scroll\n      var token = localStorage.usertoken;\n      var decoded = jwt_decode(token);\n      this.setState({\n        first_name: decoded.first_name,\n        last_name: decoded.last_name,\n        email: decoded.email\n      });\n      window.scrollTo(0, 0);\n      var user = decoded._id;\n      axios.get(\"/reservations/getMyReservation/\".concat(user)).then(function (_ref) {\n        var reservation = _ref.data;\n        console.log(reservation);\n\n        _this2.setState({\n          reservation: reservation\n        }); //this.state.date=reservation[0].dateBeg\n\n      });\n      this.checkForReservationDate();\n    }\n  }, {\n    key: \"checkForReservation\",\n    value: function checkForReservation() {\n      var check = false;\n      if (this.state.reservation.length != 0) check = true;\n      return check;\n    }\n  }, {\n    key: \"checkForReservationDate\",\n    value: function checkForReservationDate() {\n      var check = false;\n      this.state.reservation.forEach(function (card) {\n        if (moment(card.dateBeg).isBetween(Date.now(), card.dateEnd)) check = true;\n      });\n      console.log(check);\n      return check;\n    }\n  }, {\n    key: \"logOut\",\n    value: function logOut(e) {\n      e.preventDefault();\n      localStorage.removeItem('usertoken');\n      this.props.history.push(\"/login\");\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var primaryColor = getColor('primary');\n      var secondaryColor = getColor('secondary');\n      return /*#__PURE__*/React.createElement(Page, {\n        className: \"DashboardPage\",\n        title: \"Dashboard\",\n        breadcrumbs: [{\n          name: 'Dashboard',\n          active: true\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 9\n        }\n      }, \"   \", /*#__PURE__*/React.createElement(Col, {\n        lg: \"10\",\n        md: \"12\",\n        sm: \"12\",\n        xs: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(AnnouncementCard, {\n        color: \"gradient-secondary\",\n        header: \"Bienvenu Dans IOT REMOTE TEST LAB IRTL\",\n        text: this.checkForReservation ? 'Vous Avez Une  Réservation à ' + moment(this.state.date).format('DD/MM/YYYY h:mm a') : \"Pour le moment vous ne possédez pas aucune réservation\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        color: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 15\n        }\n      }))))), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: \"6\",\n        sm: \"12\",\n        xs: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(TodosCard, {\n        image: Image,\n        title: \"Cartes\",\n        to: \"/cards\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(Col, {\n        lg: \"6\",\n        md: \"12\",\n        sm: \"12\",\n        xs: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(TodosCard, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        lg: \"10\",\n        md: \"12\",\n        sm: \"12\",\n        xs: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 15\n        }\n      }, \"R\\xE9clamation \"), /*#__PURE__*/React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(CardText, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 17\n        }\n      }, \"Ici vous pouvez faire une r\\xE9clamation concernant , le fonctionnement des cartes , une panne quelconque , ou m\\xEAme une remarque afin d'am\\xE9liorer la plateforme\"), /*#__PURE__*/React.createElement(Form, {\n        onSubmit: this.handleSubmit,\n        noValidate: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(FormGroup, {\n        row: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"exampleEmail\",\n        sm: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 21\n        }\n      }, \"Objet\"), /*#__PURE__*/React.createElement(Col, {\n        sm: 10,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        type: \"text\",\n        name: \"objet\",\n        value: this.state.objet,\n        onChange: this.handleChange,\n        noValidate: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 23\n        }\n      }), this.state.errors.objet.length > 0 && /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          fontSize: 12,\n          color: \"red\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 25\n        }\n      }, this.state.errors.bjet))), /*#__PURE__*/React.createElement(FormGroup, {\n        row: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"exampleEmail\",\n        sm: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 21\n        }\n      }, \"Votre R\\xE9clamation\"), /*#__PURE__*/React.createElement(Col, {\n        sm: 10,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"textarea\", {\n        style: {\n          width: 600,\n          height: 200\n        },\n        type: \"text\",\n        name: \"rec\",\n        value: this.state.rec,\n        onChange: this.handleChange,\n        noValidate: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 23\n        }\n      }), this.state.errors.rec.length > 0 && /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          fontSize: 12,\n          color: \"red\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 25\n        }\n      }, this.state.errors.rec))), /*#__PURE__*/React.createElement(FormGroup, {\n        check: true,\n        row: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 266,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        sm: {\n          size: 10,\n          offset: 2\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 23\n        }\n      }, \"Envoyer\")))))))));\n    }\n  }]);\n\n  return DashboardPage;\n}(React.Component);\n\nexport default withRouter(DashboardPage);","map":{"version":3,"sources":["C:/Users/yosrj/Desktop/IOT_Lab/react-reduction/src/pages/DashboardPage.js"],"names":["AnnouncementCard","TodosCard","HorizontalAvatarList","MapWithBubbles","Page","ProductMedia","SupportTicket","UserProgressTable","IconWidget","NumberWidget","getStackLineChart","stackLineChartOptions","jwt_decode","avatarsData","chartjs","productsData","supportTicketsData","todosData","userProgressTableData","React","Route","Link","withRouter","Redirect","axios","Bar","Line","MdBubbleChart","MdInsertChart","MdPersonPin","MdPieChart","MdRateReview","MdShare","MdShowChart","MdThumbUp","InfiniteCalendar","Badge","Button","Card","CardBody","CardDeck","CardGroup","CardHeader","CardTitle","Col","ListGroup","ListGroupItem","Row","Form","FormGroup","FormText","Input","Label","CardText","getColor","Image","moment","addRec","getMyReservation","validateForm","errors","valid","Object","values","forEach","val","length","today","Date","lastWeek","getFullYear","getMonth","getDate","DashboardPage","handleChange","event","preventDefault","target","name","value","state","objet","rec","setState","handleSubmit","token","localStorage","usertoken","decoded","newRec","user","_id","description","isEmpty","then","res","window","location","reload","reservation","email","date","bind","first_name","last_name","scrollTo","get","data","console","log","checkForReservationDate","check","card","dateBeg","isBetween","now","dateEnd","e","removeItem","props","history","push","primaryColor","secondaryColor","active","checkForReservation","format","fontSize","color","bjet","width","height","size","offset","Component"],"mappings":"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","sourcesContent":["import { AnnouncementCard, TodosCard } from 'components/Card';\r\nimport HorizontalAvatarList from 'components/HorizontalAvatarList';\r\nimport MapWithBubbles from 'components/MapWithBubbles';\r\nimport Page from 'components/Page';\r\nimport ProductMedia from 'components/ProductMedia';\r\nimport SupportTicket from 'components/SupportTicket';\r\nimport UserProgressTable from 'components/UserProgressTable';\r\nimport { IconWidget, NumberWidget } from 'components/Widget';\r\nimport { getStackLineChart, stackLineChartOptions } from 'demos/chartjs';\r\nimport jwt_decode from 'jwt-decode';\r\nimport {\r\n  avatarsData,\r\n  chartjs,\r\n  productsData,\r\n  supportTicketsData,\r\n  todosData,\r\n  userProgressTableData,\r\n} from 'demos/dashboardPage';\r\nimport React from 'react';\r\nimport { Route, Link, withRouter, Redirect } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { Bar, Line } from 'react-chartjs-2';\r\nimport {\r\n  MdBubbleChart,\r\n  MdInsertChart,\r\n  MdPersonPin,\r\n  MdPieChart,\r\n  MdRateReview,\r\n  MdShare,\r\n  MdShowChart,\r\n  MdThumbUp,\r\n} from 'react-icons/md';\r\nimport InfiniteCalendar from 'react-infinite-calendar';\r\nimport {\r\n  Badge,\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  CardDeck,\r\n  CardGroup,\r\n  CardHeader,\r\n  CardTitle,\r\n  Col,\r\n  ListGroup,\r\n  ListGroupItem,\r\n  Row,\r\n  Form,\r\n  FormGroup,\r\n  FormText,\r\n  Input,\r\n  Label,\r\n  CardText,\r\n} from 'reactstrap';\r\nimport { getColor } from 'utils/colors';\r\nimport Image from 'assets/img/bg/IoT.jpeg';\r\nimport moment from 'moment';\r\nimport { addRec, getMyReservation } from 'components/UserFunctions';\r\nconst validateForm = (errors) => {\r\n  let valid = true;\r\n  Object.values(errors).forEach(\r\n    (val) => val.length > 0 && (valid = false)\r\n  );\r\n  return valid;\r\n}\r\n\r\nconst today = new Date();\r\nconst lastWeek = new Date(\r\n  today.getFullYear(),\r\n  today.getMonth(),\r\n  today.getDate() - 7,\r\n);\r\n\r\nclass DashboardPage extends React.Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      reservation: [],\r\n      objet: '',\r\n      rec: '',\r\n      email: '',\r\n      date: '',\r\n      errors: {\r\n        objet: '',\r\n        rec: '',\r\n      }\r\n    }\r\n    this.handleSubmit = this.handleSubmit.bind(this)\r\n  }\r\n\r\n\r\n  handleChange = (event) => {\r\n    event.preventDefault();\r\n    const { name, value } = event.target;\r\n    let errors = this.state.errors;\r\n\r\n    switch (name) {\r\n      case 'objet':\r\n        errors.objet =\r\n          value.length > 3\r\n            ? ''\r\n            : 'Vérifier votre Objet !';\r\n        break;\r\n      case 'rec':\r\n        errors.rec =\r\n          value.length > 5\r\n            ? ''\r\n            : 'Contenu Réclamation ne doit pas être vide !';\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    this.setState({ errors, [name]: value });\r\n  }\r\n  isEmpty() {\r\n    if (this.state.objet !== '' && this.state.rec !== '')\r\n      return true\r\n    else\r\n      return false\r\n  }\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n    const token = localStorage.usertoken\r\n    const decoded = jwt_decode(token)\r\n    const newRec = {\r\n      user: decoded._id,\r\n      name: this.state.objet,\r\n      description: this.state.rec,\r\n\r\n    }\r\n    if (validateForm(this.state.errors) && this.isEmpty()) {\r\n      addRec(newRec).then(res => {\r\n        window.location.reload();\r\n      })\r\n    }\r\n\r\n  };\r\n  componentDidMount() {\r\n    // this is needed, because InfiniteCalendar forces window scroll\r\n    const token = localStorage.usertoken\r\n    const decoded = jwt_decode(token)\r\n    this.setState({\r\n      first_name: decoded.first_name,\r\n      last_name: decoded.last_name,\r\n      email: decoded.email\r\n    })\r\n    window.scrollTo(0, 0);\r\n    let user = decoded._id\r\n    axios.get(`/reservations/getMyReservation/${user}`)\r\n      .then(({ data: reservation }) => {\r\n        console.log(reservation);\r\n\r\n        this.setState({ reservation });\r\n        //this.state.date=reservation[0].dateBeg\r\n      })\r\n    this.checkForReservationDate()\r\n  }\r\n\r\n  checkForReservation() {\r\n    let check = false\r\n    if (this.state.reservation.length != 0)\r\n      check = true\r\n    return check;\r\n  }\r\n  checkForReservationDate() {\r\n    let check = false\r\n    this.state.reservation.forEach(card => {\r\n      if (moment(card.dateBeg).isBetween(Date.now(), card.dateEnd))\r\n        check = true\r\n    })\r\n    console.log(check)\r\n    return check;\r\n  }\r\n  logOut(e) {\r\n    e.preventDefault()\r\n    localStorage.removeItem('usertoken')\r\n    this.props.history.push(`/login`)\r\n\r\n  }\r\n\r\n  render() {\r\n    const primaryColor = getColor('primary');\r\n    const secondaryColor = getColor('secondary');\r\n\r\n\r\n    return (\r\n\r\n      <Page\r\n        className=\"DashboardPage\"\r\n        title=\"Dashboard\"\r\n        breadcrumbs={[{ name: 'Dashboard', active: true }]}\r\n      >\r\n\r\n        <Row>   <Col lg=\"10\" md=\"12\" sm=\"12\" xs=\"12\">\r\n\r\n          <AnnouncementCard\r\n            color=\"gradient-secondary\"\r\n            header=\"Bienvenu Dans IOT REMOTE TEST LAB IRTL\"\r\n\r\n            text={this.checkForReservation ? 'Vous Avez Une  Réservation à ' + moment(this.state.date).format('DD/MM/YYYY h:mm a') : \"Pour le moment vous ne possédez pas aucune réservation\"}\r\n          >\r\n            <Link to=\"/\">\r\n              <Button color=\"primary\" /></Link>\r\n          </AnnouncementCard>\r\n\r\n        </Col></Row>\r\n\r\n        <Row>\r\n          <Col md=\"6\" sm=\"12\" xs=\"12\">\r\n            <TodosCard image={Image} title=\"Cartes\" to=\"/cards\"\r\n            />\r\n          </Col>\r\n\r\n\r\n\r\n          <Col lg=\"6\" md=\"12\" sm=\"12\" xs=\"12\">\r\n            <TodosCard />\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n\r\n\r\n\r\n          <Col lg=\"10\" md=\"12\" sm=\"12\" xs=\"12\">\r\n            <Card>\r\n              <CardHeader>Réclamation </CardHeader>\r\n              <CardBody>\r\n                <CardText>\r\n                  Ici vous pouvez faire une réclamation concernant , le fonctionnement des cartes , une panne quelconque , ou même\r\n                  une remarque afin d'améliorer la plateforme\r\n                </CardText>\r\n                <Form onSubmit={this.handleSubmit} noValidate >\r\n\r\n                  <FormGroup row>\r\n                    <Label for=\"exampleEmail\" sm={2}>\r\n                      Objet\r\n                      </Label>\r\n                    <Col sm={10}>\r\n                      <Input\r\n                        type=\"text\"\r\n                        name=\"objet\"\r\n                        value={this.state.objet}\r\n                        onChange={this.handleChange}\r\n                        noValidate\r\n                      />\r\n                      {this.state.errors.objet.length > 0 &&\r\n                        <span style={{ fontSize: 12, color: \"red\" }}>{this.state.errors.bjet}</span>}\r\n                    </Col>\r\n                  </FormGroup>\r\n                  <FormGroup row>\r\n                    <Label for=\"exampleEmail\" sm={2}>\r\n                      Votre Réclamation\r\n                      </Label>\r\n                    <Col sm={10}>\r\n                      <textarea style={{ width: 600, height: 200 }}\r\n                        type=\"text\"\r\n                        name=\"rec\"\r\n                        value={this.state.rec}\r\n                        onChange={this.handleChange}\r\n                        noValidate\r\n                      />\r\n                      {this.state.errors.rec.length > 0 &&\r\n                        <span style={{ fontSize: 12, color: \"red\" }}>{this.state.errors.rec}</span>}\r\n                    </Col>\r\n                  </FormGroup>\r\n                  <FormGroup check row>\r\n                    <Col sm={{ size: 10, offset: 2 }}>\r\n                      <Button>Envoyer</Button>\r\n                    </Col>\r\n                  </FormGroup>\r\n                </Form>\r\n              </CardBody>\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n\r\n      </Page>\r\n    );\r\n  }\r\n}\r\nexport default withRouter(DashboardPage);\r\n"]},"metadata":{},"sourceType":"module"}