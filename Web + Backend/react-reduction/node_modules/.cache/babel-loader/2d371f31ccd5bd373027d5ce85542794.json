{"ast":null,"code":"import _defineProperty from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"C:\\\\Users\\\\yosrj\\\\Desktop\\\\IOT_Lab\\\\react-reduction\\\\src\\\\pages\\\\DashboardPageModel.js\";\nimport { AnnouncementCard, TodosCard } from 'components/Card';\nimport Page from 'components/Page';\nimport jwt_decode from 'jwt-decode';\nimport React from 'react';\nimport { Route, Link, withRouter, Redirect } from 'react-router-dom';\nimport axios from 'axios';\nimport { Badge, Button, Card, CardBody, CardDeck, CardGroup, CardHeader, CardTitle, Col, ListGroup, ListGroupItem, Row, Form, FormGroup, Modal, ModalBody, ModalFooter, ModalHeader, Input, Label, CardText } from 'reactstrap';\nimport { MdBubbleChart, MdInsertChart, MdPersonPin, MdPieChart, MdRateReview, MdShare, MdShowChart, MdThumbUp, MdError, MdHistory, MdAccountBox } from 'react-icons/md';\nimport { getColor } from 'utils/colors';\nimport Image from 'assets/img/bg/IoT.jpeg';\nimport moment from 'moment';\nimport { addRec, getMyReservation } from 'components/UserFunctions';\nimport { NumberWidget, IconWidget } from 'components/Widget';\n\nvar DashboardPageModel = /*#__PURE__*/function (_React$Component) {\n  _inherits(DashboardPageModel, _React$Component);\n\n  function DashboardPageModel() {\n    var _this;\n\n    _classCallCheck(this, DashboardPageModel);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(DashboardPageModel).call(this));\n\n    _this.handleSubmit = function (event) {\n      event.preventDefault();\n    };\n\n    _this.toggle = function (modalType) {\n      return function () {\n        if (!modalType) {\n          return _this.setState({\n            modal: !_this.state.modal\n          });\n        }\n\n        _this.setState(_defineProperty({}, \"modal_\".concat(modalType), !_this.state[\"modal_\".concat(modalType)]));\n      };\n    };\n\n    _this.state = {\n      id: '',\n      modal: false,\n      modal_backdrop: false,\n      modal_nested_parent: false,\n      modal_nested: false,\n      backdrop: true,\n      reservation: [],\n      objet: '',\n      rec: '',\n      email: '',\n      date: '',\n      errors: {\n        objet: '',\n        rec: ''\n      }\n    };\n    _this.handleSubmit = _this.handleSubmit.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(DashboardPageModel, [{\n    key: \"openModal\",\n    value: function openModal(id) {\n      this.setState({\n        modal: _defineProperty({}, id, true)\n      });\n    }\n  }, {\n    key: \"checkForReservation\",\n    value: function checkForReservation() {\n      var check = false;\n\n      if (this.state.reservation.length != 0) {\n        this.state.reservation.forEach(function (card) {\n          if (moment(card.dateEnd).isAfter(new Date())) check = true;\n        });\n      }\n\n      console.log(check);\n      return check;\n    }\n  }, {\n    key: \"checkForReservationDate\",\n    value: function checkForReservationDate(card) {\n      var check = false;\n      if (moment(new Date()).isBetween(card.dateBeg, card.dateEnd)) check = true;\n      console.log(check);\n      return check;\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var params = this.props.match.params;\n      this.setState({\n        id: params.responseId\n      }); // console.log(params.responseId)\n\n      this.openModal(params.responseId);\n      var token = localStorage.usertoken;\n      var decoded = jwt_decode(token);\n      this.setState({\n        first_name: decoded.first_name,\n        last_name: decoded.last_name,\n        email: decoded.email\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var primaryColor = getColor('primary');\n      var secondaryColor = getColor('secondary');\n      return /*#__PURE__*/React.createElement(Page, {\n        className: \"DashboardPage\",\n        title: \"Dashboard\",\n        breadcrumbs: [{\n          name: 'Dashboard',\n          active: true\n        }],\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 9\n        }\n      }, this.checkForReservation() ? this.state.reservation.map(function (card) {\n        return /*#__PURE__*/React.createElement(Col, {\n          lg: 4,\n          md: 6,\n          sm: 6,\n          xs: 12,\n          className: \"mb-3\",\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 15\n          }\n        }, /*#__PURE__*/React.createElement(IconWidget, {\n          icon: MdAccountBox,\n          bgColor: \"primary\",\n          title: 'Vous Avez Une  Réservation le ' + moment(card.dateBeg).format('DD/MM/YYYY ') + ' de ' + moment(card.dateBeg).format(' h:mm a') + ' jusqu\\'à' + moment(card.dateEnd).format(' h:mm a'),\n          button: \"Commencer\",\n          link: _this2.checkForReservationDate(card) ? \"/iot_test/\".concat(card._id) : '/home',\n          __self: _this2,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152,\n            columnNumber: 17\n          }\n        }));\n      }) : /*#__PURE__*/React.createElement(Col, {\n        lg: 4,\n        md: 6,\n        sm: 6,\n        xs: 12,\n        className: \"mb-3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(IconWidget, {\n        bgColor: \"primary\",\n        title: \"Vous n'avez pas aucune r\\xE9servation \",\n        button: \"R\\xE9servez Maintenant\",\n        link: \"/reservation\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 15\n        }\n      }))), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        md: \"6\",\n        sm: \"12\",\n        xs: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(TodosCard, {\n        image: Image,\n        title: \"Cartes\",\n        to: \"/cards\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(Col, {\n        lg: \"6\",\n        md: \"12\",\n        sm: \"12\",\n        xs: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(TodosCard, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 13\n        }\n      }))), /*#__PURE__*/React.createElement(Row, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        lg: \"10\",\n        md: \"12\",\n        sm: \"12\",\n        xs: \"12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Card, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(CardHeader, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 15\n        }\n      }, \"R\\xE9clamation \"), /*#__PURE__*/React.createElement(CardBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(CardText, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 17\n        }\n      }, \"Ici vous pouvez faire une r\\xE9clamation concernant , le fonctionnement des cartes , une panne quelconque , ou m\\xEAme une remarque afin d'am\\xE9liorer la plateforme\"), /*#__PURE__*/React.createElement(Form, {\n        onSubmit: this.handleSubmit,\n        noValidate: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(FormGroup, {\n        row: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"exampleEmail\",\n        sm: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 21\n        }\n      }, \"Objet\"), /*#__PURE__*/React.createElement(Col, {\n        sm: 10,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Input, {\n        type: \"text\",\n        name: \"objet\",\n        value: this.state.objet,\n        onChange: this.handleChange,\n        noValidate: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 23\n        }\n      }), this.state.errors.objet.length > 0 && /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          fontSize: 12,\n          color: \"red\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 25\n        }\n      }, this.state.errors.bjet))), /*#__PURE__*/React.createElement(FormGroup, {\n        row: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Label, {\n        for: \"exampleEmail\",\n        sm: 2,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 21\n        }\n      }, \"Votre R\\xE9clamation\"), /*#__PURE__*/React.createElement(Col, {\n        sm: 10,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"textarea\", {\n        style: {\n          width: 600,\n          height: 200\n        },\n        type: \"text\",\n        name: \"rec\",\n        value: this.state.rec,\n        onChange: this.handleChange,\n        noValidate: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 23\n        }\n      }), this.state.errors.rec.length > 0 && /*#__PURE__*/React.createElement(\"span\", {\n        style: {\n          fontSize: 12,\n          color: \"red\"\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 25\n        }\n      }, this.state.errors.rec))), /*#__PURE__*/React.createElement(FormGroup, {\n        check: true,\n        row: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Col, {\n        sm: {\n          size: 10,\n          offset: 2\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 23\n        }\n      }, \"Envoyer\")))))))), /*#__PURE__*/React.createElement(Modal, {\n        isOpen: this.state.modal[this.state.id],\n        toggle: this.openModal.bind(this, this.state.id),\n        className: this.props.className,\n        zIndex: \"1060\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(ModalHeader, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 11\n        }\n      }, \"D\\xE9tails\"), /*#__PURE__*/React.createElement(ModalBody, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 11\n        }\n      }, \"Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\"), /*#__PURE__*/React.createElement(ModalFooter, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Link, {\n        to: \"/home\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        color: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 13\n        }\n      }, \"Fermer\")))));\n    }\n  }]);\n\n  return DashboardPageModel;\n}(React.Component);\n\nexport default withRouter(DashboardPageModel);","map":{"version":3,"sources":["C:/Users/yosrj/Desktop/IOT_Lab/react-reduction/src/pages/DashboardPageModel.js"],"names":["AnnouncementCard","TodosCard","Page","jwt_decode","React","Route","Link","withRouter","Redirect","axios","Badge","Button","Card","CardBody","CardDeck","CardGroup","CardHeader","CardTitle","Col","ListGroup","ListGroupItem","Row","Form","FormGroup","Modal","ModalBody","ModalFooter","ModalHeader","Input","Label","CardText","MdBubbleChart","MdInsertChart","MdPersonPin","MdPieChart","MdRateReview","MdShare","MdShowChart","MdThumbUp","MdError","MdHistory","MdAccountBox","getColor","Image","moment","addRec","getMyReservation","NumberWidget","IconWidget","DashboardPageModel","handleSubmit","event","preventDefault","toggle","modalType","setState","modal","state","id","modal_backdrop","modal_nested_parent","modal_nested","backdrop","reservation","objet","rec","email","date","errors","bind","check","length","forEach","card","dateEnd","isAfter","Date","console","log","isBetween","dateBeg","params","props","match","responseId","openModal","token","localStorage","usertoken","decoded","first_name","last_name","primaryColor","secondaryColor","name","active","checkForReservation","map","format","checkForReservationDate","_id","handleChange","fontSize","color","bjet","width","height","size","offset","className","Component"],"mappings":"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","sourcesContent":["import { AnnouncementCard, TodosCard } from 'components/Card';\r\nimport Page from 'components/Page';\r\nimport jwt_decode from 'jwt-decode';\r\nimport React from 'react';\r\nimport { Route, Link, withRouter, Redirect } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport {\r\n  Badge,\r\n  Button,\r\n  Card,\r\n  CardBody,\r\n  CardDeck,\r\n  CardGroup,\r\n  CardHeader,\r\n  CardTitle,\r\n  Col,\r\n  ListGroup,\r\n  ListGroupItem,\r\n  Row,\r\n  Form,\r\n  FormGroup,\r\n  Modal,\r\n  ModalBody,\r\n  ModalFooter,\r\n  ModalHeader,\r\n  Input,\r\n  Label,\r\n  CardText,\r\n} from 'reactstrap';\r\nimport {\r\n  MdBubbleChart,\r\n  MdInsertChart,\r\n  MdPersonPin,\r\n  MdPieChart,\r\n  MdRateReview,\r\n  MdShare,\r\n  MdShowChart,\r\n  MdThumbUp,\r\n  MdError,\r\n  MdHistory,\r\n  MdAccountBox,\r\n} from 'react-icons/md';\r\nimport { getColor } from 'utils/colors';\r\nimport Image from 'assets/img/bg/IoT.jpeg';\r\nimport moment from 'moment';\r\nimport { addRec, getMyReservation } from 'components/UserFunctions';\r\nimport { NumberWidget, IconWidget } from 'components/Widget';\r\n\r\nclass DashboardPageModel extends React.Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      id:'',\r\n      modal: false,\r\n      modal_backdrop: false,\r\n      modal_nested_parent: false,\r\n      modal_nested: false,\r\n      backdrop: true,\r\n      reservation: [],\r\n      objet: '',\r\n      rec: '',\r\n      email: '',\r\n      date: '',\r\n      errors: {\r\n        objet: '',\r\n        rec: '',\r\n      }\r\n    }\r\n    this.handleSubmit = this.handleSubmit.bind(this)\r\n  }\r\n\r\n\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault();\r\n\r\n\r\n  };\r\n  toggle = modalType => () => {\r\n    if (!modalType) {\r\n      return this.setState({\r\n        modal: !this.state.modal,\r\n\r\n      });\r\n    }\r\n\r\n    this.setState({\r\n      [`modal_${modalType}`]: !this.state[`modal_${modalType}`],\r\n    });\r\n  };\r\n  openModal(id) {\r\n    this.setState({\r\n      modal: {\r\n        [id]: true\r\n      }\r\n    });\r\n  }\r\n  checkForReservation() {\r\n    let check = false\r\n    if (this.state.reservation.length != 0) {\r\n      this.state.reservation.forEach(card => {\r\n        if (moment(card.dateEnd).isAfter(new Date()))\r\n          check = true\r\n      })\r\n    }\r\n    console.log(check)\r\n    return check;\r\n  }\r\n  checkForReservationDate(card) {\r\n    let check = false\r\n    if (moment(new Date()).isBetween(card.dateBeg, card.dateEnd))\r\n      check = true\r\n\r\n    console.log(check)\r\n    return check;\r\n  }\r\n  componentDidMount() {\r\n    const { match: { params } } = this.props;\r\n    this.setState( {id:params.responseId})\r\n  // console.log(params.responseId)\r\n   this.openModal(params.responseId)\r\n    const token = localStorage.usertoken\r\n    const decoded = jwt_decode(token)\r\n    this.setState({\r\n      first_name: decoded.first_name,\r\n      last_name: decoded.last_name,\r\n      email: decoded.email\r\n    })\r\n\r\n  }\r\n\r\n  \r\n\r\n  render() {\r\n    const primaryColor = getColor('primary');\r\n    const secondaryColor = getColor('secondary');\r\n\r\n\r\n    return (\r\n\r\n      <Page\r\n        className=\"DashboardPage\"\r\n        title=\"Dashboard\"\r\n        breadcrumbs={[{ name: 'Dashboard', active: true }]}\r\n      >\r\n\r\n        <Row>\r\n\r\n          {this.checkForReservation() ?\r\n            this.state.reservation.map(card => (\r\n              <Col lg={4} md={6} sm={6} xs={12} className=\"mb-3\">\r\n                <IconWidget\r\n                  icon={MdAccountBox}\r\n                  bgColor=\"primary\"\r\n                  title={'Vous Avez Une  Réservation le ' + moment(card.dateBeg).format('DD/MM/YYYY ') + ' de ' + moment(card.dateBeg).format(' h:mm a') + ' jusqu\\'à' + moment(card.dateEnd).format(' h:mm a')}\r\n                  button=\"Commencer\"\r\n                  link={this.checkForReservationDate(card) ? `/iot_test/${card._id}` : '/home'}\r\n\r\n                />\r\n              </Col>\r\n            )\r\n            ) : <Col lg={4} md={6} sm={6} xs={12} className=\"mb-3\">\r\n              <IconWidget\r\n                bgColor=\"primary\"\r\n                title=\"Vous n'avez pas aucune réservation \"\r\n                button=\"Réservez Maintenant\"\r\n                link=\"/reservation\"\r\n\r\n              />\r\n            </Col>}\r\n\r\n\r\n        </Row>\r\n\r\n        <Row>\r\n          <Col md=\"6\" sm=\"12\" xs=\"12\">\r\n            <TodosCard image={Image} title=\"Cartes\" to=\"/cards\"\r\n            />\r\n          </Col>\r\n\r\n\r\n\r\n          <Col lg=\"6\" md=\"12\" sm=\"12\" xs=\"12\">\r\n            <TodosCard />\r\n          </Col>\r\n        </Row>\r\n        <Row>\r\n\r\n\r\n\r\n          <Col lg=\"10\" md=\"12\" sm=\"12\" xs=\"12\">\r\n            <Card>\r\n              <CardHeader>Réclamation </CardHeader>\r\n              <CardBody>\r\n                <CardText>\r\n                  Ici vous pouvez faire une réclamation concernant , le fonctionnement des cartes , une panne quelconque , ou même\r\n                  une remarque afin d'améliorer la plateforme\r\n                </CardText>\r\n                <Form onSubmit={this.handleSubmit} noValidate >\r\n\r\n                  <FormGroup row>\r\n                    <Label for=\"exampleEmail\" sm={2}>\r\n                      Objet\r\n                      </Label>\r\n                    <Col sm={10}>\r\n                      <Input\r\n                        type=\"text\"\r\n                        name=\"objet\"\r\n                        value={this.state.objet}\r\n                        onChange={this.handleChange}\r\n                        noValidate\r\n                      />\r\n                      {this.state.errors.objet.length > 0 &&\r\n                        <span style={{ fontSize: 12, color: \"red\" }}>{this.state.errors.bjet}</span>}\r\n                    </Col>\r\n                  </FormGroup>\r\n                  <FormGroup row>\r\n                    <Label for=\"exampleEmail\" sm={2}>\r\n                      Votre Réclamation\r\n                      </Label>\r\n                    <Col sm={10}>\r\n                      <textarea style={{ width: 600, height: 200 }}\r\n                        type=\"text\"\r\n                        name=\"rec\"\r\n                        value={this.state.rec}\r\n                        onChange={this.handleChange}\r\n                        noValidate\r\n                      />\r\n                      {this.state.errors.rec.length > 0 &&\r\n                        <span style={{ fontSize: 12, color: \"red\" }}>{this.state.errors.rec}</span>}\r\n                    </Col>\r\n                  </FormGroup>\r\n                  <FormGroup check row>\r\n                    <Col sm={{ size: 10, offset: 2 }}>\r\n                      <Button>Envoyer</Button>\r\n                    </Col>\r\n                  </FormGroup>\r\n                </Form>\r\n              </CardBody>\r\n            </Card>\r\n          </Col>\r\n        </Row>\r\n        <Modal\r\n          isOpen={this.state.modal[this.state.id]}\r\n          toggle={this.openModal.bind(this, this.state.id)}\r\n          className={this.props.className}\r\n          zIndex=\"1060\">\r\n          <ModalHeader>Détails</ModalHeader>\r\n          <ModalBody>\r\n                      Lorem ipsum dolor sit amet, consectetur adipisicing elit,\r\n                      sed do eiusmod tempor incididunt ut labore et dolore magna\r\n                      aliqua. Ut enim ad minim veniam, quis nostrud exercitation\r\n                      ullamco laboris nisi ut aliquip ex ea commodo consequat.\r\n                      Duis aute irure dolor in reprehenderit in voluptate velit\r\n                      esse cillum dolore eu fugiat nulla pariatur. Excepteur sint\r\n                      occaecat cupidatat non proident, sunt in culpa qui officia\r\n                      deserunt mollit anim id est laborum.\r\n          </ModalBody>\r\n          <ModalFooter>\r\n            <Link to=\"/home\">\r\n            <Button color=\"primary\">\r\n              Fermer\r\n            </Button>\r\n            </Link>\r\n          </ModalFooter>\r\n        </Modal>\r\n      </Page>\r\n    );\r\n  }\r\n}\r\nexport default withRouter(DashboardPageModel);\r\n"]},"metadata":{},"sourceType":"module"}